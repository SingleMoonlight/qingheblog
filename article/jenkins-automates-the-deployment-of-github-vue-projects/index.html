<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.22" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.144" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Jenkins 自动化部署 GitHub Vue 项目","image":[""],"dateModified":"2024-11-30T13:15:27.000Z","author":[]}</script><meta property="og:url" content="https://blog.ifback.com/article/jenkins-automates-the-deployment-of-github-vue-projects/"><meta property="og:site_name" content="青何博客"><meta property="og:title" content="Jenkins 自动化部署 GitHub Vue 项目"><meta property="og:description" content="写在前面 个人站点使用本地化开发，本地打包后手动上传到服务器，这个流程说麻烦也麻烦，说简单也简单。如果每次一个小的改动都需要这么走一遍，也挺不爽的。借助 CI/CD 工具，自动化地完成上述步骤，连更新都会变得更有动力呢，哈哈哈。 下面实现的 CI/CD 流程如下： 1、本地开发，push 到 Github 仓库后 2、触发 Github 的钩子函数，通..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2024-11-30T13:15:27.000Z"><meta property="article:tag" content="GitHub"><meta property="article:tag" content="Jenkins"><meta property="article:modified_time" content="2024-11-30T13:15:27.000Z"><link rel="icon" href="/favicon.ico"><title>Jenkins 自动化部署 GitHub Vue 项目 | 青何博客</title><meta name="description" content="写在前面 个人站点使用本地化开发，本地打包后手动上传到服务器，这个流程说麻烦也麻烦，说简单也简单。如果每次一个小的改动都需要这么走一遍，也挺不爽的。借助 CI/CD 工具，自动化地完成上述步骤，连更新都会变得更有动力呢，哈哈哈。 下面实现的 CI/CD 流程如下： 1、本地开发，push 到 Github 仓库后 2、触发 Github 的钩子函数，通..."><link rel="preload" href="/assets/style-GTCeSq7_.css" as="style"><link rel="stylesheet" href="/assets/style-GTCeSq7_.css"><link rel="modulepreload" href="/assets/app-WIG124Xj.js"><link rel="modulepreload" href="/assets/index.html-DCbwMD4S.js"><link rel="prefetch" href="/assets/index.html-DW-S6mUh.js" as="script"><link rel="prefetch" href="/assets/index.html-BMkgOV2p.js" as="script"><link rel="prefetch" href="/assets/index.html-B563hYxu.js" as="script"><link rel="prefetch" href="/assets/index.html-DDb6ZT38.js" as="script"><link rel="prefetch" href="/assets/index.html-BLZu1ZJF.js" as="script"><link rel="prefetch" href="/assets/index.html-IccDr0js.js" as="script"><link rel="prefetch" href="/assets/index.html-ChGpEWhd.js" as="script"><link rel="prefetch" href="/assets/index.html-8owOhOKv.js" as="script"><link rel="prefetch" href="/assets/index.html-C8RvsbAn.js" as="script"><link rel="prefetch" href="/assets/index.html-DJuXunNX.js" as="script"><link rel="prefetch" href="/assets/index.html-4gP7lP5o.js" as="script"><link rel="prefetch" href="/assets/index.html-vUPqO24x.js" as="script"><link rel="prefetch" href="/assets/index.html-BUy30QZ4.js" as="script"><link rel="prefetch" href="/assets/index.html-BxGAZNwx.js" as="script"><link rel="prefetch" href="/assets/index.html-B3Qo7PO4.js" as="script"><link rel="prefetch" href="/assets/index.html-C6G4EmTQ.js" as="script"><link rel="prefetch" href="/assets/index.html-C-4XA5Cp.js" as="script"><link rel="prefetch" href="/assets/index.html-CeWenVAB.js" as="script"><link rel="prefetch" href="/assets/index.html-ElGjchFi.js" as="script"><link rel="prefetch" href="/assets/index.html-BpJaA0_A.js" as="script"><link rel="prefetch" href="/assets/index.html-DN_SWN2k.js" as="script"><link rel="prefetch" href="/assets/index.html-DZAO48Bl.js" as="script"><link rel="prefetch" href="/assets/index.html-BEyMkcd1.js" as="script"><link rel="prefetch" href="/assets/index.html-DqZH3Zwj.js" as="script"><link rel="prefetch" href="/assets/index.html-BvHlWbai.js" as="script"><link rel="prefetch" href="/assets/index.html-BVEcneXR.js" as="script"><link rel="prefetch" href="/assets/index.html-BLAJDnDT.js" as="script"><link rel="prefetch" href="/assets/index.html-BzdA-Awq.js" as="script"><link rel="prefetch" href="/assets/index.html-B-04K7Y7.js" as="script"><link rel="prefetch" href="/assets/index.html-BbxJ0Fux.js" as="script"><link rel="prefetch" href="/assets/index.html-psce4oj2.js" as="script"><link rel="prefetch" href="/assets/index.html-B5mDZUqN.js" as="script"><link rel="prefetch" href="/assets/index.html-1wgQJcEb.js" as="script"><link rel="prefetch" href="/assets/index.html-q6PnqhKP.js" as="script"><link rel="prefetch" href="/assets/index.html-D3E5bfRc.js" as="script"><link rel="prefetch" href="/assets/index.html-Ce2Tudj6.js" as="script"><link rel="prefetch" href="/assets/index.html-xYWxlyCg.js" as="script"><link rel="prefetch" href="/assets/index.html-BYJ4tIEJ.js" as="script"><link rel="prefetch" href="/assets/index.html-BxrOtH5R.js" as="script"><link rel="prefetch" href="/assets/index.html-Dx60dsHQ.js" as="script"><link rel="prefetch" href="/assets/index.html-CRHzG4sf.js" as="script"><link rel="prefetch" href="/assets/index.html-N3VJZvN2.js" as="script"><link rel="prefetch" href="/assets/index.html-BTXxwrLF.js" as="script"><link rel="prefetch" href="/assets/index.html-Ds7r0Ysm.js" as="script"><link rel="prefetch" href="/assets/index.html-B2s8hnnv.js" as="script"><link rel="prefetch" href="/assets/index.html-CKNOPKx7.js" as="script"><link rel="prefetch" href="/assets/index.html-BBc8CkOu.js" as="script"><link rel="prefetch" href="/assets/index.html-CV9Fz4wV.js" as="script"><link rel="prefetch" href="/assets/index.html-CwsoLXGy.js" as="script"><link rel="prefetch" href="/assets/index.html-CTKOU-vm.js" as="script"><link rel="prefetch" href="/assets/index.html-Btuiqh6x.js" as="script"><link rel="prefetch" href="/assets/index.html-2vaGnrAF.js" as="script"><link rel="prefetch" href="/assets/index.html-DDKClRLI.js" as="script"><link rel="prefetch" href="/assets/404.html-CijD47sX.js" as="script"><link rel="prefetch" href="/assets/index.html-BQSPPuPP.js" as="script"><link rel="prefetch" href="/assets/index.html-DUwCrPZ1.js" as="script"><link rel="prefetch" href="/assets/index.html-BlF0DhT9.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-DXWKOczD.js" as="script"><link rel="prefetch" href="/assets/giscus-1zs_z9NH.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-DLfT0Fmi.js" as="script"><link rel="prefetch" href="/assets/SearchBox-DESTSrFr.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-d90a7a26><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-d5a8d0bc></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-d5a8d0bc> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-d90a7a26 data-v-e98a6132><div class="vp-navbar" vp-navbar data-v-e98a6132 data-v-2c31ea5e><div class="wrapper" data-v-2c31ea5e><div class="container" data-v-2c31ea5e><div class="title" data-v-2c31ea5e><div class="vp-navbar-title" data-v-2c31ea5e data-v-1a4f50af><a class="vp-link no-icon link title" href="/" data-v-1a4f50af data-v-442a52aa><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="/favicon.ico" alt data-v-eda4b9bd><!--]--><!--[--><img class="vp-image light logo" style="" src="/favicon.ico" alt data-v-eda4b9bd><!--]--><!--]--><!--]--><span data-v-1a4f50af>青何博客</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-2c31ea5e><div class="content-body" data-v-2c31ea5e><!--[--><!--]--><div class="vp-navbar-search search" data-v-2c31ea5e><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-2c31ea5e data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-d4acf911 data-v-442a52aa><!--[--><!----><span data-v-d4acf911>首页</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/tags/" tabindex="0" data-v-d43c1732 data-v-d4acf911 data-v-442a52aa><!--[--><!----><span data-v-d4acf911>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/categories/" tabindex="0" data-v-d43c1732 data-v-d4acf911 data-v-442a52aa><!--[--><!----><span data-v-d4acf911>分类</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link no-icon link navbar-menu-link" href="/archives/" tabindex="0" data-v-d43c1732 data-v-d4acf911 data-v-442a52aa><!--[--><!----><span data-v-d4acf911>归档</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>笔记</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link no-icon link" href="/c/" data-v-1ff1855f data-v-442a52aa><!--[--><!----> C 编程 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link no-icon link" href="/java/" data-v-1ff1855f data-v-442a52aa><!--[--><!----> Java 编程 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-2c31ea5e data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-2c31ea5e data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/SingleMoonlight" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-2c31ea5e data-v-652282fd data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-86530b6c><span class="vpi-more-horizontal icon" data-v-86530b6c></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/SingleMoonlight" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-2c31ea5e data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-2c31ea5e><div class="divider-line" data-v-2c31ea5e></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-d90a7a26 data-v-3944d8e8><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-3944d8e8><span class="vpi-align-left menu-icon" data-v-3944d8e8></span><span class="menu-text" data-v-3944d8e8>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3944d8e8 data-v-4114a62c><button data-v-4114a62c>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-d90a7a26 data-v-b2beaca7><div class="vp-doc-container is-blog" data-v-b2beaca7 data-v-a703f9d3><!--[--><!--]--><div class="container" data-v-a703f9d3><!----><div class="content" data-v-a703f9d3><div class="content-container" data-v-a703f9d3><!--[--><!--]--><main class="main" data-v-a703f9d3><nav class="vp-breadcrumb" data-v-a703f9d3 data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb" href="/" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="首页" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb" href="/categories/?id=41282b" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->编程<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="编程" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link no-icon link breadcrumb current" href="/article/jenkins-automates-the-deployment-of-github-vue-projects/" property="item" typeof="WebPage" data-v-1ae4ad7a data-v-442a52aa><!--[-->Jenkins 自动化部署 GitHub Vue 项目<!--]--><!----></a><!----><meta property="name" content="Jenkins 自动化部署 GitHub Vue 项目" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-27be53cb>Jenkins 自动化部署 GitHub Vue 项目 <!----></h1><div class="vp-doc-meta" data-v-27be53cb><!--[--><!--]--><p class="reading-time" data-v-27be53cb><span class="vpi-books icon" data-v-27be53cb></span><span data-v-27be53cb>约 1981 字</span><span data-v-27be53cb>大约 7 分钟</span></p><p data-v-27be53cb><span class="vpi-tag icon" data-v-27be53cb></span><!--[--><a class="vp-link no-icon link tag vp-tag-tebe" href="/tags/?tag=Jenkins" data-v-27be53cb data-v-442a52aa><!--[-->Jenkins<!--]--><!----></a><a class="vp-link no-icon link tag vp-tag-ppla" href="/tags/?tag=GitHub" data-v-27be53cb data-v-442a52aa><!--[-->GitHub<!--]--><!----></a><!--]--></p><!--[--><!--]--><p class="create-time" data-v-27be53cb><span class="vpi-clock icon" data-v-27be53cb></span><span data-v-27be53cb>2024-08-25</span></p></div><!--]--><!--[--><!--]--><div class="_article_jenkins-automates-the-deployment-of-github-vue-projects_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-a703f9d3><!--[--><!--]--><div data-v-a703f9d3><h2 id="写在前面" tabindex="-1"><a class="header-anchor" href="#写在前面"><span>写在前面</span></a></h2><p>个人站点使用本地化开发，本地打包后手动上传到服务器，这个流程说麻烦也麻烦，说简单也简单。如果每次一个小的改动都需要这么走一遍，也挺不爽的。借助 CI/CD 工具，自动化地完成上述步骤，连更新都会变得更有动力呢，哈哈哈。</p><p>下面实现的 CI/CD 流程如下：</p><p>1、本地开发，push 到 Github 仓库后</p><p>2、触发 Github 的钩子函数，通知 Jenkins，进行重新构建</p><p>3、Jenkins 构建完成后，将前端打包出来的 dist 目录，发送到部署的服务器上的 Nginx 容器挂载的部署目录下</p><p>4、完成部署，进行访问</p><h2 id="插件安装" tabindex="-1"><a class="header-anchor" href="#插件安装"><span>插件安装</span></a></h2><blockquote><p>docker 部署 Jenkins 可以见：<a href="https://blog.ifback.com/article/docker-deploy-jenkins/" target="_blank" rel="noopener noreferrer">https://blog.ifback.com/article/docker-deploy-jenkins/</a></p></blockquote><p>在插件市场选择必须的插件进行安装，如果按照上述文章进行配置 Jenkins，这里应该只差下面几个插件。</p><h3 id="nodejs" tabindex="-1"><a class="header-anchor" href="#nodejs"><span>NodeJS</span></a></h3><p>NodeJS 是 vue 项目的打包构建必备环境，不必多说。</p><p><img src="/assets/1725081781705-d78e60cd-6754-4c2d-9c03-3fad4f12a6f1-D-24qaI6.png" alt=""></p><h3 id="publish-over-ssh" tabindex="-1"><a class="header-anchor" href="#publish-over-ssh"><span>Publish Over SSH</span></a></h3><p>配置 Jenkins 与服务器之间的 SSH，用于将 Jenkins 容器中的文件上传至宿主机。</p><p><img src="/assets/1725109460579-3482f8fc-8d0f-462e-8bd1-c8b149f43e9c-C69-CSuC.png" alt=""></p><h2 id="github-配置" tabindex="-1"><a class="header-anchor" href="#github-配置"><span>GitHub 配置</span></a></h2><p>首先要有一个 vue 项目仓库，这里以本人项目为例。</p><h3 id="github-配置-webhook" tabindex="-1"><a class="header-anchor" href="#github-配置-webhook"><span>GitHub 配置 WebHook</span></a></h3><p>在项目 Setting 下选择 WebHook，点击点击 WebHook。</p><p><img src="/assets/1725082523420-cea32358-4150-4971-adf3-5085ba22b4fe-CszKMNy4.png" alt=""></p><p>输入 WebHook 的基本配置：</p><p>Payload URL 为<code>Jenkins URL/github-webhook/</code>，即自己搭建的 Jenkins 服务器地址。</p><p>何时触发 WebHook，这里选择的<code>Just the push event</code>表示当有 push 时，请求上述 WebHook 地址。</p><p><img src="/assets/1725082746184-a9360b59-b3b0-4eae-8a9b-7b1d65af2814-CABcKEjF.png" alt=""></p><h3 id="github-配置-access-token" tabindex="-1"><a class="header-anchor" href="#github-配置-access-token"><span>GitHub 配置 Access Token</span></a></h3><p>Jenkins 访问 GitHub 需要通过令牌进行鉴权，因此需要添加 Assess Token。</p><p>在开发者设置中，选择个人令牌生成。</p><p><img src="/assets/1725096727180-a460e145-4980-4065-9490-b6c32273c50b-CGwcj9hu.png" alt=""></p><p>输入名字，便于区分。</p><p><img src="/assets/1725087358610-5aa5b93b-dce1-4d00-98ef-77a647dec105-fw8UrRv_.png" alt=""></p><p>勾选 repo 和 repo_hook。</p><p><img src="/assets/1725087369763-b1c0d80f-f237-4cd2-82a9-24de87696af8-BWx6RXpg.png" alt=""></p><p><img src="/assets/1725087379486-b46030f9-21c6-437c-9a14-519880350c6f-BikziE0S.png" alt=""></p><p>最后点击生成即可，注意需要将 token 即时保存下来，因为它只会显示一次。</p><h2 id="全局凭据配置" tabindex="-1"><a class="header-anchor" href="#全局凭据配置"><span>全局凭据配置</span></a></h2><p>Jenkins 提供了集中管理凭据的地方，即全局凭据配置，可以理解为密码箱，在这里可以配置所需的凭据。</p><p><img src="/assets/1725085672442-95d97612-8d44-4191-8eaa-da6dc6d8466c-B1EluDEC.png" alt=""></p><h3 id="github-账号凭据" tabindex="-1"><a class="header-anchor" href="#github-账号凭据"><span>GitHub 账号凭据</span></a></h3><p><img src="/assets/1725085780653-45733ba2-1e65-4e21-8ab2-528934cc1207-BDCpMydx.png" alt=""></p><h3 id="github-令牌凭据" tabindex="-1"><a class="header-anchor" href="#github-令牌凭据"><span>GitHub 令牌凭据</span></a></h3><p>这里要选择 Secret text，密钥就是 Assess Token。</p><p><img src="/assets/1725087971097-2336d15b-6274-4aaa-ae9a-7f7bee6eb9cb-D_hKvh2G.png" alt=""></p><p>配置完成效果如下：</p><p><img src="/assets/1725088398181-052540a3-9fc7-4d15-90e8-8843f9a5606e-d6CkIliZ.png" alt=""></p><h2 id="jenkins-插件配置" tabindex="-1"><a class="header-anchor" href="#jenkins-插件配置"><span>Jenkins 插件配置</span></a></h2><h3 id="配置-nodejs" tabindex="-1"><a class="header-anchor" href="#配置-nodejs"><span>配置 NodeJS</span></a></h3><p>在系统管理&gt;全局工具配置里新增 NodeJS，新增安装里这里选择了镜像网站，实测使用官网下载会失败。</p><p><img src="/assets/1725097434278-b3231285-893b-4795-b166-deb51fabe16c-CjwCTGSV.png" alt=""></p><p>设置别名、版本等信息后，点击保存。</p><p><img src="/assets/1725097397370-7257a237-a17b-412e-9b1f-8c29c50f32ea-Dp7aVzTN.png" alt=""></p><h3 id="配置-publish-over-ssh" tabindex="-1"><a class="header-anchor" href="#配置-publish-over-ssh"><span>配置 Publish Over SSH</span></a></h3><p>这里也简单记录下 SSH 配置过程：</p><p>1、首先在 Jenkins 容器里执行如下命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">ssh-keygen</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -t</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> rsa</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -f</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /var/jenkins_home/.ssh/id_rsa</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -N</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jenkins</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -C</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jenkins</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>-t，表示生成算法；</p><p>-f，表示生成文件路径以及文件名称，这里的路径是容器里的路径；</p><p>-N，表示生成是添加密码，也可以不加，不过生产过程需要手动确认；</p><p>-C，表示对生成的 SSH 密钥添加注释。</p><p>2、然后在宿主机，将生成的 SSH 公钥，即 id_rsa.pub 配置到宿主机，这里的路径是宿主机的路径。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">cat</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> jenkins_home/.ssh/id_rsa.pub</span><span style="--shiki-light:#AB5959;--shiki-dark:#CB7676;"> &gt;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> /root/.ssh/authorized_keys</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>配置完成后，在系统管理下面，找到 Publish Over SSH，输入密码、密钥路径。</p><p><img src="/assets/1725109581297-4ac25084-0d6c-4e96-8264-9f7f45594439-9sPGyKaX.png" alt=""></p><p>Disable exec 视情况，可以勾选也可以不勾选，勾选后就不能通过 SSH 执行宿主机命令。</p><p>然后在 SSH Server 里添加宿主机的基本信息，Name 可以自己取，Hostname 就是宿主机 IP，Username 就是宿主机用户，Remote Directory 是宿主机的目录，可以自定义，这里就定义为根目录。</p><p><img src="/assets/1725109745565-970b3873-e926-4fbf-9962-c94ba1c1d8f7-tAoLxrLl.png" alt=""></p><p>配置完成，点击测试，显示 Success 证明配置成功。</p><h3 id="配置-github-服务器" tabindex="-1"><a class="header-anchor" href="#配置-github-服务器"><span>配置 GitHub 服务器</span></a></h3><p>在系统管理里，找到添加 GitHub 服务器，然后输入服务器名称和 URL，默认已经输入好了。</p><p>凭据选择上面新增的个人令牌凭据，输入完成可以点击测试，出现下图所示 log 即为成功。</p><p><img src="/assets/1725088014615-87bb8aae-4e87-48f8-adb4-2e06066c9592-9MH4iNzG.png" alt=""></p><h2 id="创建任务" tabindex="-1"><a class="header-anchor" href="#创建任务"><span>创建任务</span></a></h2><p>完成上述配置后，就可以开始创建任务了。</p><p>输入任务命令，选择任务类型，这里选择的是自由风格软件项目，自由风格可供配置的自由度非常高，然后点击创建。</p><p><img src="/assets/1725083934799-e071a210-58a5-4571-b9c5-dd3576249729-qJ4Zu7X7.png" alt=""></p><p>进入项目配置界面后，可以看到有六个配置项，可以根据实际情况进行配置。</p><p><img src="/assets/1725084084374-4766d795-225e-4e0b-98ca-b81c618cb23a-Ctiyc--4.png" alt=""></p><p>下面就 GitHub vue 项目进行配置介绍。</p><h3 id="general" tabindex="-1"><a class="header-anchor" href="#general"><span>General</span></a></h3><p>输入项目描述等，途中 GitHub 项目输入实际项目地址。</p><p><img src="/assets/1725085942502-06386b18-b49c-4808-8a83-364de2c69b2e-Ccr_2FNg.png" alt=""></p><h3 id="源码管理" tabindex="-1"><a class="header-anchor" href="#源码管理"><span>源码管理</span></a></h3><p>源码仓库地址输入实际项目地址，凭据选择 GitHub 账号凭据，构建将通过该地址和凭据拉取代码。</p><p><img src="/assets/1725097690413-a9f59ab2-ad57-4044-af24-5d54a12c8aa7-D_3gAjoz.png" alt=""></p><p>如果遇到了无权限访问 The TLS connection was non-properly terminated 的情况，可以执行如下命令。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  --unset</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https.https://github.com.proxy</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;">  --unset</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http.https://github.com.proxy</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --unset</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> http.proxy</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">git</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --global</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> --unset</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https.proxy</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>参考：<a href="https://zhuanlan.zhihu.com/p/436645167" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/436645167</a></p><h3 id="构建触发器" tabindex="-1"><a class="header-anchor" href="#构建触发器"><span>构建触发器</span></a></h3><p>构建触发器选择 GitHub hook，因为前面配置了 GitHub WebHook，当我们 push 代码时，Jenkins 就会自动开始构建。</p><p><img src="/assets/1725086054082-2659bbc6-c257-44b1-a35d-d46826c87087-I6NHUB__.png" alt=""></p><h3 id="构建环境" tabindex="-1"><a class="header-anchor" href="#构建环境"><span>构建环境</span></a></h3><p>构建环境需要选择 NodeJS ，这里选择前面配置的 NodeJS 20.11.0。</p><p>然后还选择了在构建日志中添加时间戳，如果有问题便于查看和分析。</p><p><img src="/assets/1725086249048-5c8dab22-c8ed-4ef1-aa6f-6a612f7ac238-BGTSrqOT.png" alt=""></p><h3 id="构建步骤" tabindex="-1"><a class="header-anchor" href="#构建步骤"><span>构建步骤</span></a></h3><p>构建步骤选择添加执行 shell，内容就是构建 vue 项目的命令。</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&gt;&gt;&gt;&gt;&gt;&gt; Start build...</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> config</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> set</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> registry</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> https://registry.npmmirror.com</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> install</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">npm</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> run</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> build</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">echo</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">&gt;&gt;&gt;&gt;&gt;&gt; Build dist.tar.gz</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">tar</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -czvf</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dist.tar.gz</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> dist</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>当然如果有其他需求，也可以自行添加，想我这里添加了配置 npm 镜像和打包的命令。</p><p><img src="/assets/1725114707483-3b6a89ea-f3f0-4cc9-9620-73dcc43262bf-bvq1Fqrp.png" alt=""></p><h3 id="构建后操作" tabindex="-1"><a class="header-anchor" href="#构建后操作"><span>构建后操作</span></a></h3><p>构建后操作，即完成构建后执行的操作，这里就是将构建好的 dist 文件拷贝到 nginx 配置的目录下。</p><p>添加通过 SSH 发送构建产物的操作，SSH Server 选择上面配置的宿主机。</p><p><img src="/assets/1725112781389-769bf910-be48-409b-9677-f56533968c74-CF4lS8g1.png" alt=""></p><p>在执行命令中，选择要执行的命令，注意这里执行是在宿主机执行。</p><p><img src="/assets/1725112832094-1bbc071e-b914-4bdd-894f-278b51d3d02e-BOOwOdkj.png" alt=""></p><p>同时我这里还添加了一个归档成品的步骤，用于保存每次构建成功的 dist 压缩包。</p><p><img src="/assets/1725114729898-3ad91a6d-d367-4e24-a8ec-69842a9d0762-CSw5cIza.png" alt=""></p><h2 id="手动构建" tabindex="-1"><a class="header-anchor" href="#手动构建"><span>手动构建</span></a></h2><p>配置完任务后，可以点击手动构建，查看构建是否符合预期。</p><p>构建过程可以在控制台输出查看，如果遇到错误可以根据报错进行解决。</p><p><img src="/assets/1725114957641-1ec890ce-4163-4361-918f-c85a0bb21cb2-mUtxUZHu.png" alt=""></p><h2 id="自动构建" tabindex="-1"><a class="header-anchor" href="#自动构建"><span>自动构建</span></a></h2><p>在本地代码仓库推送代码到远程仓库，即可触发自动构建。</p><p><img src="/assets/1725116305500-55e5034d-cdb9-4c30-98ce-40897e29e0b4-CpUoLGQ8.png" alt=""></p><p>如果构建发现时间与实际时间差了 8 个小时，可以在脚本命令行处粘贴并运行如下命令：</p><div class="language-shell line-numbers-mode" data-highlighter="shiki" data-ext="shell" style="--shiki-light:#393a34;--shiki-dark:#dbd7caee;--shiki-light-bg:#ffffff;--shiki-dark-bg:#121212;"><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">System.setProperty(</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;org.apache.commons.jelly.tags.fmt.timeZone&#39;</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">,</span><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">&#39;Asia/Shanghai&#39;</span><span style="--shiki-light:#393A34;--shiki-dark:#DBD7CAEE;">)</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p><img src="/assets/1725117293323-113c7489-1a3f-41c8-b380-d3c6a998c938-CL9zL7hp.png" alt=""></p><p>再次构建可以看到时间就正常了：</p><p><img src="/assets/1725117405931-84372f37-fc7e-4c34-865a-b2bc77a99fef-CUJpMRoV.png" alt=""></p></div><!----><!----><!----></div></main><footer class="vp-doc-footer" data-v-a703f9d3 data-v-fda6bbae><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-fda6bbae><span class="contributors-label" data-v-fda6bbae>贡献者: </span><span class="contributors-info" data-v-fda6bbae><!--[--><!--[--><span class="contributor" data-v-fda6bbae>SingleMoonlight</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-fda6bbae><div class="pager" data-v-fda6bbae><a class="vp-link no-icon link pager-link prev" href="/article/docker-deploys-cerbot-to-automatically-obtain-ssl-certificates/" data-v-fda6bbae data-v-442a52aa><!--[--><span class="desc" data-v-fda6bbae>上一页</span><span class="title" data-v-fda6bbae>Docker 部署 Certbot 自动获取 SSL 证书</span><!--]--><!----></a></div><div class="pager" data-v-fda6bbae><a class="vp-link no-icon link pager-link next" href="/article/docker-deploy-jenkins/" data-v-fda6bbae data-v-442a52aa><!--[--><span class="desc" data-v-fda6bbae>下一页</span><span class="title" data-v-fda6bbae>Docker 部署 Jenkins</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-a703f9d3><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-d90a7a26 data-v-bcf8d9a6><span class="percent" data-allow-mismatch data-v-bcf8d9a6>0%</span><span class="show icon vpi-back-to-top" data-v-bcf8d9a6></span><svg aria-hidden="true" data-v-bcf8d9a6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-bcf8d9a6></circle></svg></button><footer class="vp-footer" vp-footer data-v-d90a7a26 data-v-400675cf><!--[--><div class="container" data-v-400675cf><!----><p class="copyright" data-v-400675cf>© 2021-2025 <a href=https://ifback.com/ target=_blank>ifback.com</a></p></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-WIG124Xj.js" defer></script></body></html>