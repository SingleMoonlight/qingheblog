---
title: è¯­é›€ + Elog + vuepress + Theme Plume + GitHub Pages + GitHub Action ä¸€ç«™å¼åšå®¢è§£å†³æ–¹æ¡ˆ
createTime: 2024/09/22 07:26:32
permalink: /article/yuque-elog-vuepress-plume-github-pages-action-one-stop-blog-solution/
tags:
  - Blog
  - Vuepress
  - GitHub
---
å‰é¢åšå®¢è¯´è¿‡ï¼Œåšå®¢æ–¹æ¡ˆæ¢æ¥æ¢å»ï¼Œæ²¡æœ‰ä¼˜é›…ï¼Œåªæœ‰æ›´ä¼˜é›…ã€‚ç°åœ¨æ‰¾åˆ°äº†æ»¡è¶³æˆ‘æ‰€æœ‰éœ€æ±‚çš„æ–¹æ¡ˆã€‚ä¸å‡ºæ„å¤–ï¼Œè¿™ä¹Ÿå°†æ˜¯æœ€ç»ˆçš„æ–¹æ¡ˆäº†ï¼ŒæŠ˜è…¾äº†ä¸€å¤©ï¼Œå†™ä¸‹æ¥çœ‹çœ‹èƒ½ä¸èƒ½å¸®åˆ°æœ‰ç›¸åŒæƒ³æ³•çš„äººã€‚

<!-- more -->

### æœ€ç»ˆæ•ˆæœ
+ è¯­é›€ä¸Šå†™æ–‡ç« ã€‚
+ æœ¬åœ°æ‰§è¡ŒåŒæ­¥ã€‚
+ æ¨é€åˆ° GitHubã€‚
+ å®Œæˆï¼

å¦‚æœè§‰å¾—ä¸ç¬¦åˆä½ çš„è¦æ±‚ï¼Œé‚£ä¹ˆä¸‹é¢å°±ä¸ç”¨æµªè´¹æ—¶é—´çœ‹äº†ï¼Œé™¤éè¯´æœ‰å…´è¶£å“ˆã€‚

### æœ¬æ–¹æ¡ˆçš„ä¼˜åŠ¿/ç‰¹ç‚¹
+ æœ¬åœ°/å¹³å°/äº‘ç«¯ä¸‰æ–¹å¤‡ä»½ï¼Œæä¸ºå®‰å…¨ï¼Œä¸ç”¨æ‹…å¿ƒæ•°æ®ä¸¢å¤±çš„é—®é¢˜ã€‚
+ è‡ªåŠ¨é›†æˆ/è‡ªåŠ¨éƒ¨ç½²ï¼Œä¼˜é›…ä¾¿æ·ã€‚
+ ä¸éœ€è¦äº‘æœåŠ¡å™¨ï¼Œä¸éœ€è¦åŸŸåå¤‡æ¡ˆï¼Œç”šè‡³å¯ä»¥ä¸éœ€è¦åŸŸåï¼Œæ²¡æœ‰è´Ÿæ‹…ã€‚
+ ä¸»é¢˜æ’ä»¶ä¸°å¯Œï¼Œå¯ç›´æ¥ä½¿ç”¨ï¼Œä¹Ÿå¯è‡ªç”±å®šåˆ¶ï¼Œå¦‚ä½•é…ç½®ç”±è‡ªå·±æŒæ§ã€‚
+ ä¸Šæ‰‹éš¾åº¦ä½ï¼Œå„ä¸ªå·¥å…·éƒ½æœ‰è¯¦å°½çš„ä»‹ç»æ–‡æ¡£ï¼Œç”šè‡³å¯ä»¥ç›´æ¥é—®ä½œè€…ã€‚

### æœ¬æ–¹æ¡ˆçš„ä¸è¶³/ç¼ºç‚¹
+ å¦‚æœæ²¡æœ‰å¼€é€šè¯­é›€ä¼šå‘˜ï¼Œæ— æ³•ä½¿ç”¨ WebHook å®ç°å®Œå…¨çš„è‡ªåŠ¨åŒ–ï¼Œè¿˜éœ€è¦åœ¨æœ¬åœ°æ‰‹åŠ¨åŒæ­¥ï¼Œç„¶å push åˆ° GitHubï¼Œä¸è¿‡æˆ‘è¦çš„æ•ˆæœå°±æ˜¯è¿™æ ·ï¼Œå¯ä»¥åœ¨æœ¬åœ°é¢„è§ˆå’Œå¤‡ä»½ã€‚
+ è¯­é›€è‡ªå¸¦çš„éƒ¨åˆ†æ‰©å±•è¯­æ³•ï¼Œå¦‚åˆ†é¡µã€ä¸ªåˆ«é¢œè‰²é«˜äº®ã€å­—ä½“é¢œè‰²é…ç½®ç­‰ï¼Œ Elog ä»¥åŠ vuepress æ²¡æœ‰å®Œå…¨åŒæ­¥ã€‚
+ GitHub è®¿é—®å¯èƒ½ä¼šå› ä¸ºç½‘ç»œé—®é¢˜æ”¶åˆ°å½±å“ã€‚

å¦‚ä½•å–èˆï¼Œçœ‹å¤§å®¶çš„éœ€æ±‚ï¼Œç›®å‰æ¥è¯´æœ¬æ–¹æ¡ˆå¯ä»¥æ»¡è¶³æˆ‘çš„æ‰€æœ‰éœ€æ±‚ï¼Œå¯ä»¥çœ‹çœ‹æœ¬åšå®¢çš„æ•ˆæœã€‚

## å¼€å§‹å®è·µ
ç”¨åˆ°çš„æ‰€æœ‰å·¥å…·å¦‚ä¸‹ï¼Œå„ä¸ªå·¥å…·çš„å®˜æ–¹æ–‡æ¡£è¡¨æ ¼é‡Œä¹Ÿå·²è´´å‡ºï¼Œå¦‚æœæƒ³è‡ªå·±æ‘¸ç´¢ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æ–‡æ¡£ä»‹ç»ã€‚

| å·¥å…· | ç”¨é€” |
| --- | --- |
| [vuepress](https://vuepress.vuejs.org/) | åšå®¢æ¡†æ¶ |
| [vuepress-theme-plume](https://theme-plume.vuejs.press/) | åšå®¢ä¸»é¢˜ |
| [Elog](https://elog.1874.cool/) | è¯­é›€æ–‡ç« åŒæ­¥ |
| [GitHub Pages](https://pages.github.com/) | éƒ¨ç½²å¹³å° |
| [GitHub Action](https://docs.github.com/zh/actions) | è‡ªåŠ¨æ„å»º |


åºŸè¯ä¸å¤šè¯´ï¼Œä¸‹é¢ç›´æ¥å¼€å§‹å®æ“ã€‚

### ç¯å¢ƒå‡†å¤‡
æœ¬è®°å½•å¹¶éé¢å¯¹çº¯å°ç™½ã€ä»é›¶å¼€å§‹ï¼Œæœ€åŸºæœ¬çš„ç¯å¢ƒé…ç½®éœ€è¦æœ‰ï¼Œè¿™é‡Œä¸ä¼šåšè¿‡å¤šä»‹ç»ã€‚

#### Git
ç”¨äºç®¡ç†ä»£ç åº“ã€‚

#### Node
æœ€åŸºæœ¬çš„ä¾èµ–åº“ï¼Œæˆªè‡³ç›®å‰ï¼ˆ2024/9/22ï¼‰ï¼Œvuepress-theme-plume å’Œ Elog å„è‡ªå¯¹ Node çš„ç‰ˆæœ¬è¦æ±‚å¦‚ä¸‹ï¼š

| å·¥å…· | Node ç‰ˆæœ¬è¦æ±‚ |
| --- | --- |
| [vuepress-theme-plume](https://theme-plume.vuejs.press/) | >= v18.20.0 |
| [Elog](https://elog.1874.cool/) | >= v12.0.0 |


æˆ‘æœ¬åœ°ç”¨çš„ Node ç‰ˆæœ¬ä¸º`v20.11.0`ã€‚

### vuepress é…ç½®
> vuepress æ˜¯åšå®¢çš„æ¡†æ¶ï¼ŒåŸç”Ÿçš„æ¡†æ¶åŠŸèƒ½å¹¶ä¸å®Œå–„ï¼Œå› æ­¤é‡‡ç”¨äº† vuepress-theme-plume ä¸»é¢˜ã€‚
>

#### å‘½ä»¤è¡Œå®‰è£…
åœ¨æœ¬åœ°ä»»æ„ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```plain
npm init vuepress-theme-plume@latest
```

å¯åŠ¨å®‰è£…å‘å¯¼åï¼Œéƒ¨ç½²æ–¹å¼é€‰æ‹© GitHub Pagesï¼Œé€‰æ‹©åˆå§‹åŒ– git ä»“åº“ï¼Œå…¶ä»–çš„æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œé€‰æ‹©ï¼Œè¿™äº›åé¢éƒ½å¯ä»¥åœ¨ä»£ç ä¸­è¿›è¡Œä¿®æ”¹ï¼š

```plain
T  Welcome to VuePress and vuepress-theme-plume !
|
o  Select a language to display / é€‰æ‹©æ˜¾ç¤ºè¯­è¨€
|  ç®€ä½“ä¸­æ–‡
|
o  æ‚¨æƒ³åœ¨å“ªé‡Œåˆå§‹åŒ– VuePressï¼Ÿ
|  ./my-project
|
o  ç«™ç‚¹åç§°ï¼š
|  My Vuepress Site
|
o  ç«™ç‚¹æè¿°ä¿¡æ¯ï¼š
|  My Vuepress Site Description
|
o  æ˜¯å¦ä½¿ç”¨å¤šè¯­è¨€ï¼Ÿ
|  No
|
o  è¯·é€‰æ‹©ç«™ç‚¹é»˜è®¤è¯­è¨€
|  ç®€ä½“ä¸­æ–‡
|
o  æ˜¯å¦ä½¿ç”¨ TypeScriptï¼Ÿ
|  No
|
o  è¯·é€‰æ‹©æ‰“åŒ…å·¥å…·
|  Vite
|
o  éƒ¨ç½²æ–¹å¼ï¼š
|  GitHub Pages
|
o  æ˜¯å¦åˆå§‹åŒ– git ä»“åº“ï¼Ÿ
|  Yes
|
o  æ˜¯å¦å®‰è£…ä¾èµ–ï¼Ÿ
|  Yes
|
o  ğŸ‰ åˆ›å»ºæˆåŠŸ!
|
â€”  ğŸ”¨ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å¯åŠ¨ï¼š
      cd ./my-project
      npm run docs:dev
```

ç°åœ¨ vuepress å°±é…ç½®å¥½äº†ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚

#### å¯åŠ¨
è¿›å…¥ç›®å½•æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤åï¼Œå°±å¯ä»¥åœ¨æœ¬åœ°çœ‹åˆ°é»˜è®¤ vuepress-theme-plume çš„ç«™ç‚¹äº†ã€‚

```javascript
npm run docs:dev
```

#### è‡ªå®šä¹‰
åˆ°è¿™ä½ è‚¯å®šè§‰å¾—è¿˜ä¸å¤Ÿï¼Œæƒ³è¦è‡ªå·±ä¿®æ”¹æ ·å¼ã€å¸ƒå±€ï¼Œè‡ªå·±è§„åˆ’æ–‡ä»¶ç±»åˆ«ï¼Œé‚£ä¹ˆè¯·æ¥ç€çœ‹ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥å…ˆè·³è¿‡è¿™ä¸€èŠ‚ï¼Œå…ˆæŠŠæ•´ä¸ªæµç¨‹èµ°é€šï¼Œæœ€ååœ¨åšè‡ªå®šä¹‰çš„é…ç½®ã€‚

ä¸‹é¢æ˜¯æœ¬åšå®¢æ‰€åšçš„ä¸€äº›è‡ªå®šä¹‰é…ç½®ã€‚

##### ç½‘ç«™å›¾æ ‡
è¯·åœ¨ config.js æ–‡ä»¶çš„ defineUserConfig ä¸­æ·»åŠ  head é…ç½®ï¼Œhref è¯·ä¿®æ”¹ä¸ºè‡ªå®šä¹‰çš„å›¾æ ‡è·¯å¾„ï¼Œå›¾æ ‡æ–‡ä»¶è®°å¾—æ”¾åœ¨ docs/.vuepress/public æ–‡ä»¶å¤¹ä¸‹ï¼Œåšå®¢çš„æ‰€æœ‰åœ°æ–¹å›¾ç‰‡å¼•ç”¨éƒ½å¯ä»¥ä½¿ç”¨ç›¸å¯¹äº docs/.vuepress/public æ–‡ä»¶å¤¹çš„è·¯å¾„ã€‚

```javascript
export default defineUserConfig({
  head: [
    ['link', { rel: 'icon', href: '/favicon.ico' }],
  ],
  // å…¶ä»–é…ç½®
})
```

##### é¡µè„š
é¡µè„šé»˜è®¤å¯é…ç½®ä¸¤è¡Œã€‚message å’Œ coptrightï¼Œå¯ä»¥æ˜¯ç›´æ¥çš„å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥æ˜¯ html å…ƒç´ ï¼Œæ¯”å¦‚æœ¬åšå®¢çš„é…ç½®å¦‚ä¸‹ï¼š

```javascript
export const copyright = 
  'Â© ' +
  new Date().getFullYear() +
  ' ' +
  '<a href=https://ifback.com/ target=_blank>ifback.com</a>' +
  ' ' +
  'è±«å…¬ç½‘å®‰å¤‡ ' +
  '<a href=https://www.beian.gov.cn/ target=_blank>41152402000212å·</a>' +
  ' ' +
  'è±«ICPå¤‡ ' +
  '<a href=https://beian.miit.gov.cn/ target=_blank>2021014629å·-2</a>'

export default defineUserConfig({
  theme: plumeTheme({
    footer: {
      message: '',
      copyright: copyright,
    },
  })
  // å…¶ä»–é…ç½®
})
```

##### å¯¼èˆªæ 
å¯¼èˆªæ çš„é…ç½®å¾ˆç®€å•ï¼Œåœ¨ navbar.js ä¸­å¯ä»¥è‡ªè¡Œé…ç½®ï¼Œå¯ä»¥è¿›è¡ŒåµŒå¥—ï¼Œæœ¬åšå®¢çš„é…ç½®å¦‚ä¸‹ï¼š

```javascript
export const navbar = defineNavbarConfig([
  { text: 'é¦–é¡µ', link: '/' },
  { text: 'æ ‡ç­¾', link: '/tags/' },
  { text: 'åˆ†ç±»', link: '/categories/' },
  { text: 'å½’æ¡£', link: '/archives/' },
  {
    text: 'ç¬”è®°',
    items: [
      { text: 'Cç¼–ç¨‹', link: '/c/', activeMatch: '^/c/', },
      { text: 'Javaç¼–ç¨‹', link: '/java/', activeMatch: '^/java/', },
    ],
  },
])
```

è¿™é‡Œéœ€è¦è¯´æ˜ä¸€ä¸‹ï¼Œå¯¼èˆªæ çš„é»˜è®¤æ ‡ç­¾ã€åˆ†ç±»å’Œå½’æ¡£é“¾æ¥æ˜¯å†…ç½®çš„ï¼Œé»˜è®¤éƒ½ä¼šæœ‰ `/blog/` çš„å‰ç¼€ï¼Œå¦‚æœä½ ä¸æƒ³è¦è¿™ä¸ªå‰ç¼€ï¼Œä¸ä»…éœ€è¦åœ¨æ­¤å¤„ä¿®æ”¹ï¼Œè¿˜éœ€è¦åœ¨ config.js ä¸­è¿›è¡ŒåŒæ­¥ï¼Œä»¥è¦†ç›–å†…ç½®çš„å®šä¹‰ã€‚

```javascript
export default defineUserConfig({
  theme: plumeTheme({
    blog: {
      tagsLink: '/tags/',
      categoriesLink: '/categories/',
      archivesLink: '/archives/',
    },
  })
  // å…¶ä»–é…ç½®
})
```

> å…³äºç¬”è®°æ–‡ç« ï¼Œéœ€è¦æ³¨æ„çš„æ¯”è¾ƒå¤šï¼Œæ”¾åœ¨åé¢çš„å°èŠ‚ä¸“é—¨è¯´æ˜ã€‚
>

### elog é…ç½®
#### å‘½ä»¤è¡Œå®‰è£…
åœ¨åˆ›å»ºå¥½çš„ vuepress-theme-plume ç›®å½•ä¸‹æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```javascript
npm install @elog/cli
```

#### åˆå§‹åŒ–
é¦–å…ˆåœ¨æ ¹ç›®å½• package.json ä¸­æ‰‹åŠ¨æ·»åŠ  `"elog:init": "elog init"` ä¸€æ¡å‘½ä»¤

> ä¸Šä¸€æ­¥ä½¿ç”¨çš„æ˜¯å±€éƒ¨å®‰è£…ï¼Œè€Œé»˜è®¤å®‰è£…å package.json é‡Œæ²¡æœ‰è‡ªåŠ¨ç”Ÿæˆä¸Šè¿°å‘½ä»¤ï¼Œå¯¼è‡´åœ¨åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œ elog init å‘½ä»¤ä¼šæŠ¥é”™ã€‚
>

```javascript
{
  "scripts": {
    // å…¶ä»–æŒ‡ä»¤
    "elog:init": "elog init",
    "elog:sync-note": "elog sync",
    "elog:clean": "elog clean",
  },
}
```

ç„¶åæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š

```javascript
npm run elog:init
```

æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œä¼šåœ¨æ ¹ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆ `elog.config.js` é…ç½®æ–‡ä»¶å’Œæœ¬åœ°è°ƒè¯•ç”¨çš„ `.elog.env` ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ã€‚

> è®°å¾—å°† .elog.env æ–‡ä»¶åŠ åˆ° .gitignore æ–‡ä»¶ä¸­ï¼Œé¿å…å¯†é’¥ä¿¡æ¯ä¸Šä¼ åˆ° GitHub æ³„éœ²ã€‚
>

#### è¯­é›€ç¯å¢ƒå˜é‡é…ç½®
ç¼–è¾‘ .elog.env æ–‡ä»¶ä¸­çš„è¯­é›€é…ç½®ä¿¡æ¯ï¼Œæ ¹æ®ä¸åŒçš„æ–¹å¼é€‰æ‹©ä¸åŒçš„é…ç½®ï¼Œè¿™é‡Œæ˜¯æ ¹æ®è´¦å·å¯†ç è¿›è¡Œé…ç½®ã€‚

`YUQUE_LOGIN`ï¼šä¸ªäººè·¯å¾„ï¼Œåœ¨`å¤´åƒ`->`è®¾ç½®`->`è´¦æˆ·ç®¡ç†`->`ä¸ªäººè·¯å¾„`è¿›è¡Œé…ç½®ã€‚

`YUQUE_REPO`ï¼šçŸ¥è¯†åº“è·¯å¾„ï¼Œåœ¨`çŸ¥è¯†åº“`->`æ›´å¤šè®¾ç½®`->`è·¯å¾„è¿›è¡Œ`é…ç½®ã€‚

![](../../../.vuepress/public/images/1727012035723-e5622735-7535-431c-9cda-608a3275ab7d.png)

```javascript
# è¯­é›€ï¼ˆTokenæ–¹å¼ï¼‰
YUQUE_TOKEN=
# è¯­é›€ï¼ˆå¸å·å¯†ç æ–¹å¼ï¼‰
YUQUE_USERNAME=**********
YUQUE_PASSWORD=**********
# è¯­é›€å…¬å…±å‚æ•°ï¼Œä½¿ç”¨è¯­é›€å¿…å¡«
YUQUE_LOGIN==smilingly
YUQUE_REPO==coding
```

#### è¾“å‡ºé…ç½®
ç¼–è¾‘`elog.config.js` é…ç½®æ–‡ä»¶ï¼Œä¿®æ”¹å…¶ä¸­çš„éƒ¨ç½²å¹³å°é…ç½®å’Œå›¾åºŠé…ç½®ã€‚

1. deployï¼Œéƒ¨ç½²å¹³å°é…ç½®ï¼Œè¿™é‡Œå°±æ˜¯æœ¬åœ°ï¼ˆåé¢æ¨é€åˆ° GitHubï¼‰ã€‚

`outputDir`ï¼šè¾“å‡ºåˆ°æŒ‡å®šçš„ç›®å½•ä¸‹ï¼Œæ˜¯å°†ä¸Šä¸€æ­¥é…ç½®çš„è¯­é›€çŸ¥è¯†åº“æ–‡æ¡£æ•´ä¸ªè¾“å‡ºåˆ°è¿™ä¸ªæŒ‡å®šçš„ç›®å½•ä¸‹ã€‚

`catalog`ï¼štrueï¼ŒæŒ‰ç…§è¯­é›€çš„ç›®å½•è¿›è¡Œè¾“å‡ºï¼Œè€Œéå…¨éƒ¨åŒä¸€çº§è¾“å‡ºã€‚

2. imageï¼Œå›¾åºŠé…ç½®ï¼Œè¿™é‡Œå°±æ˜¯æœ¬åœ°ï¼ˆåé¢æ¨é€åˆ° GitHubï¼‰ã€‚

`outputDir`ï¼šè¾“å‡ºåˆ°æŒ‡å®šçš„ç›®å½•ä¸‹ï¼Œæ˜¯å°†è¯­é›€æ–‡æ¡£ä¸­ä¸‹è½½çš„æ‰€æœ‰å›¾ç‰‡æ”¾åœ¨è¿™ä¸ªæŒ‡å®šçš„ç›®å½•ä¸‹ï¼Œè¿™é‡ŒæŒ‡å®šä¸º vuepress çš„ public è·¯å¾„ä¸‹ã€‚

`prefixKey`ï¼šä¸ç”¨ç®¡ï¼Œé»˜è®¤å³å¯ã€‚

`pathFollowDoc`ï¼štrueï¼Œé‡‡ç”¨ç›¸å¯¹è·¯å¾„ï¼Œå³å°†æ–‡æ¡£é‡Œçš„æ‰€æœ‰å›¾ç‰‡è·¯å¾„æ›¿æ¢ä¸ºç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·åœ¨æœ¬åœ°å’Œ GitHub éƒ¨ç½²åå¯ä»¥ç›´æ¥æ­£å¸¸è®¿é—®ã€‚

```javascript
module.exports = {
  deploy: {
    platform: 'local',
    local: {
      outputDir: './docs/ç¼–ç¨‹',
      filename: 'title',
      format: 'markdown',
      catalog: true,
    },
  },
  image: {
    enable: true,
    platform: 'local',
    local: {
      outputDir: './docs/.vuepress/public/images',
      prefixKey: '/images',
      pathFollowDoc: true,
    },
  }
  // å…¶ä»–é…ç½®
}
```

#### å¼€å§‹åŒæ­¥
å®Œæˆä¸Šè¿°é…ç½®åï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯å¼€å¯è‡ªåŠ¨åŒæ­¥ï¼š

```javascript
npm run elog:sync
```

ä¸å‡ºæ„å¤–çš„è¯ï¼Œå°±å¯ä»¥çœ‹åˆ°æ§åˆ¶å°åœ¨è¾“å‡ºåŒæ­¥è¿‡ç¨‹ã€‚ç­‰åˆ°åŒæ­¥å®Œæˆï¼Œå¯åŠ¨ vuepressï¼Œä½ å°±å¯ä»¥çœ‹åˆ°è‡ªå·±çš„åšå®¢è¿è¡Œèµ·æ¥äº†ï¼Œèƒ½å¤Ÿåœ¨é¦–é¡µçœ‹åˆ°è‡ªå·±çš„åšå®¢æ–‡ç« ã€‚

#### è‡ªå®šä¹‰
##### å¤šçŸ¥è¯†åº“
å¦‚æœæœ‰å¤šä¸ªçŸ¥è¯†åº“éœ€è¦åŒæ­¥ï¼Œåªéœ€è¦å°†`elog.config.js` å’Œ `.elog.env` é…ç½®æ–‡ä»¶åˆ†åˆ« copy ä¸€ä»½ï¼Œé‡æ–°å‘½åä¸€ä¸‹ã€‚æ¯”å¦‚æˆ‘è¿™é‡Œå°±ä»¥`elog-çŸ¥è¯†åº“è·¯å¾„`å‘½åã€‚å‘½åä¸º`elog-share.config.js` å’Œ `.elog-share.env`ï¼Œç„¶åå¯¹è¿™ä¸¤ä¸ªæ–°çš„é…ç½®æ–‡ä»¶ä¹Ÿåšä¸€ä¸‹ä¸Šé¢çš„ç¯å¢ƒå˜é‡é…ç½®å’Œè¾“å‡ºé…ç½®å³å¯ã€‚ç®€å•æ¥è¯´ï¼Œåªéœ€è¦ä¿®æ”¹ç¯å¢ƒå˜é‡é…ç½®ä¸­çš„çŸ¥è¯†åº“è·¯å¾„å’Œè¾“å‡ºé…ç½®ä¸­çš„è¾“å‡ºç›®å½•ã€‚

ç„¶ååœ¨ package.json ä¸­ä¿®æ”¹ä¸€ä¸‹å‘½ä»¤ï¼ŒæŒ‡å®šåŒæ­¥å’Œæ¸…é™¤æ—¶ç”¨çš„é…ç½®æ–‡ä»¶ï¼š

```javascript
{
  "scripts": {
    // å…¶ä»–æŒ‡ä»¤
    "elog:init": "elog init",
    "elog:sync-coding": "elog sync -e .elog-coding.env -a elog-coding.cache.json -c elog-coding.cjs",
    "elog:clean-coding": "elog clean -a elog-coding.cache.json -c elog-coding.cjs",
    "elog:sync-share": "elog sync -e .elog-share.env -a elog-share.cache.json -c elog-share.cjs",
    "elog:clean-share": "elog clean -a elog-share.cache.json -c elog-share.cjs"
  },
}
```

æ‰§è¡ŒåŒæ­¥çš„æ—¶å€™åˆ†åˆ«æ‰§è¡Œç›¸åº”å‘½ä»¤å³å¯ï¼š

```javascript
// åŒæ­¥codingçŸ¥è¯†åº“
npm run elog:sync-coding
// åŒæ­¥shareçŸ¥è¯†åº“
npm run elog:sync-share
```

åˆ°è¿™é‡Œï¼Œæ¯å½“è¯­é›€æ–°å»ºæˆ–è€…æ›´æ–°æ–‡æ¡£åï¼Œåœ¨æœ¬åœ°æ‰§è¡ŒåŒæ­¥å‘½ä»¤ï¼Œæœ¬åœ°çš„ vuepress ç«™ç‚¹å°±å¯ä»¥çœ‹åˆ°æ–‡æ¡£æ›´æ–°äº†ã€‚

### GitHub é…ç½®
#### åˆ›å»ºä»£ç åº“
ä¸ºåšå®¢ç«™ç‚¹åˆ›å»ºä¸€ä¸ªä»£ç ä»“åº“ã€‚

ç„¶ååœ¨ä»“åº“é¡µé¢ä¸Šæ–¹ï¼Œä¾æ¬¡é€‰æ‹©`Setting`->`Action`->`General`ï¼Œç„¶ååˆ’åˆ°æœ€ä¸‹é¢ï¼Œåœ¨`Workflow permissions`é¡¹ä¸­ï¼Œé€‰æ‹©èµ‹äºˆè¯»å†™æƒé™ã€‚

![](../../../.vuepress/public/images/1729175857184-ecb05e93-8c88-42b4-be06-98d4c352dc64.png)

#### æ¨é€ä»£ç 
å› ä¸ºå‰é¢å·²ç»åˆå§‹åŒ–è¿‡ä»£ç ä»“åº“å’Œ GitHub Pagesï¼Œç°åœ¨åªéœ€è¦å°†ä»£ç æ¨é€åˆ° GitHub å³å¯è§¦å‘ GitHub è‡ªåŠ¨æ‰“åŒ…æ„å»ºã€‚å¦‚æœä¸å‡ºæ„å¤–çš„è¯ï¼Œæ„å»ºå®Œæˆå°±å¯ä»¥çœ‹åˆ°è‡ªåŠ¨åˆ›å»ºçš„æ–°åˆ†æ”¯`gh-pages`ä»¥åŠæ‰“åŒ…å¥½çš„äº§ç‰©ã€‚

![](../../../.vuepress/public/images/1727017191808-14d602eb-0043-439f-be5b-b538b7422ad7.png)

#### é…ç½® Pages
OKï¼Œåˆ°ç°åœ¨åˆ°åšå®¢ç½‘ç«™èƒ½å¤Ÿæ­£å¸¸è®¿é—®åªå·®ä¸€æ­¥ä¹‹é¥ã€‚

åœ¨ä»“åº“çš„`Setting`->`Pages`é‡Œï¼Œ`Branch`é€‰æ‹©è‡ªåŠ¨ç”Ÿæˆçš„`gh-pages`ï¼Œç¨ç­‰ä¸€ä¼šï¼Œå°†ä¼šåœ¨ä¸Šé¢çœ‹åˆ°ç½‘ç«™å¯ä»¥è®¿é—®äº†ã€‚

![](../../../.vuepress/public/images/1727017489163-d1ec85bb-165b-4b90-8cdb-55a93556e2f2.png)

æˆ‘è¿™é‡Œè‡ªå®šä¹‰äº†åŸŸåï¼Œå¦‚æœæ²¡æœ‰è‡ªå®šä¹‰åŸŸååœ°å€åº”è¯¥æ˜¯`***.github.io/ä»“åº“åç§°`ã€‚

> å¦‚ä½•è‡ªå®šä¹‰åŸŸåï¼š[https://blog.ifback.com/article/github-pages-bind-custom-domain-and-enable-https/](https://blog.ifback.com/article/github-pages-bind-custom-domain-and-enable-https/)
>

## æ›´è¿›ä¸€æ­¥
### vuepress-theme-plume ç¬”è®°
`note` ç¬”è®°æ˜¯ vuepress-theme-plume ä¸»é¢˜çš„ä¸€å¤§ç‰¹è‰²ï¼Œå¯ä»¥å°†æˆç³»åˆ—çš„æ–‡ç« ç»„ç»‡åˆ°ä¸€èµ·ï¼Œåªéœ€è¦åœ¨ defineNavbarConfig çš„æ¡ç›®ä¸­æ·»åŠ  items çš„å­æˆå‘˜æ¡ç›®å³å¯ï¼ŒåŒæ—¶åœ¨ notes.js é‡Œå®šä¹‰å…·ä½“çš„ç¬”è®°ï¼Œéœ€è¦å£°æ˜ç¬”è®°ç›®å½•ã€ç¬”è®°é“¾æ¥ï¼Œå…·ä½“å¯ä»¥å‚è€ƒæœ¬åšå®¢çš„é…ç½®æˆ–è€…é»˜è®¤çš„ demo ç¬”è®°ã€‚

#### æ€»ç¬”è®°ç›®å½•åç§°
é»˜è®¤æƒ…å†µä¸‹æ€»ç¬”è®°ç›®å½•æ˜¯ notesï¼Œä¸ªäººä¸æ˜¯å¾ˆå–œæ¬¢ï¼Œå› ä¸ºåé¢ä¼šåœ¨åœ¨ docs ç›®å½•ä¸‹åŒæ­¥è¯­é›€çš„æ–‡æ¡£ï¼Œç›®å½•éƒ½æ˜¯ä¸­æ–‡ï¼Œè¿™é‡Œæ•´ä¸ªè‹±æ–‡çœ‹ç€å¾ˆéš¾å—ï¼Œå› æ­¤å°†å…¶æ”¹ä¸ºäº†`ç¬”è®°`ï¼Œä¸‹é¢ defineNotesConfig çš„ dir ä¹Ÿéœ€è¦åŒæ­¥ä¿®æ”¹ã€‚

> å¦‚æœä½ ä¸åœ¨æ„ï¼Œå¯ä»¥ä¸ä¿®æ”¹ã€‚
>

```javascript
export const notes = defineNotesConfig({
  dir: 'ç¬”è®°',
  link: '/',
  notes: [],
})
```

#### æ·»åŠ ç¬”è®°ç›®å½•å£°æ˜
é¦–å…ˆåœ¨ notes.js ä¸­å£°æ˜è¦æ·»åŠ çš„ç¬”è®°ï¼Œéœ€è¦æŒ‡å®šæ¯ä¸ªç¬”è®°çš„ç›®å½•ã€URL å‰ç¼€ï¼Œå£°æ˜åæ·»åŠ åˆ°æ€»ç¬”è®°çš„ `notes` æ•°ç»„é‡Œã€‚

```javascript
// æ¯ä¸ªç¬”è®°çš„å£°æ˜
const cNote = defineNoteConfig({
  dir: 'Cç¼–ç¨‹', // ç¬”è®°çš„ç›®å½•ï¼Œè¿™ä¸ªåœ¨æœ¬åœ°çœ‹å°±æ˜¯./docs/ç¬”è®°/Cç¼–ç¨‹/
  link: '/c/', // ç¬”è®°çš„ URL å‰ç¼€ï¼Œè¿™ä¸ªåœ¨åœ°å€æ ä¸­å°±æ˜¯domain/c/
  sidebar: 'auto', // è‡ªåŠ¨ç”Ÿæˆä¾§è¾¹æ 
})

const javaNote = defineNoteConfig({
  dir: 'Javaç¼–ç¨‹',
  link: '/java/',
  sidebar: 'auto',
})

// æ€»çš„ç¬”è®°å£°æ˜
export const notes = defineNotesConfig({
  dir: 'ç¬”è®°', // æ‰€æœ‰ç¬”è®°çš„æ ¹ç›®å½•
  link: '/', // æ‰€æœ‰ç¬”è®° URL çš„å·¥å…±å‰ç¼€
  notes: [cNote, javaNote],
})
```

#### å¯¼èˆªæ æ·»åŠ ç¬”è®°é“¾æ¥
å¯¼èˆªæ é‡Œæ·»åŠ ç¬”è®°çš„è·¯å¾„è¦ä¸ä¸Šé¢å£°æ˜çš„è·¯å¾„ä¸€è‡´ï¼š

```javascript
export const navbar = defineNavbarConfig([
  { text: 'é¦–é¡µ', link: '/' },
  { text: 'æ ‡ç­¾', link: '/tags/' },
  { text: 'åˆ†ç±»', link: '/categories/' },
  { text: 'å½’æ¡£', link: '/archives/' },
  {
    text: 'ç¬”è®°',
    items: [
      { text: 'Cç¼–ç¨‹', link: '/c/', activeMatch: '^/c/', },
      { text: 'Javaç¼–ç¨‹', link: '/java/', activeMatch: '^/java/', },
    ],
  },
])
```

è¿™æ—¶å€™æ²¡æœ‰ç¬”è®°æ–‡æ¡£ï¼Œé¡µé¢è¿˜æ— æ³•è®¿é—®åˆ°ç¬”è®°ã€‚

#### æ·»åŠ ç¬”è®°é¦–é¡µ
å†æ·»åŠ å®Œç¬”è®°ç›®å½•å£°æ˜åï¼Œéœ€è¦åœ¨ç¬”è®°ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª README.md æ–‡æ¡£ï¼Œåœ¨æ–‡æ¡£å¤´éƒ¨æ·»åŠ  frontmatterï¼Œä¾‹å¦‚ï¼š

> å¦‚æœæ­¤æ—¶å·²ç»è¿è¡Œèµ·äº† vuepressï¼Œé‚£ä¹ˆ frontmatter ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚
>

```javascript
---
title: Cç¼–ç¨‹
createTime: 2024/09/22 00:29:57
permalink: /c/
---
```

å…¶ä¸­çš„ permalink éœ€è¦ä¸ä¸Šä¸€æ­¥å£°æ˜çš„ç¬”è®° URL å‰ç¼€ç›¸åŒï¼Œå¦åˆ™é¡µé¢è®¿é—®ä¼šå‡ºç° 404ã€‚

é¡µé¢è®¿é—® domain/permalink/ åï¼Œå°±ä¼šè®¿é—®åˆ°ç¬”è®° README.md æ–‡æ¡£ã€‚

#### æ·»åŠ ç¬”è®°æ–‡æ¡£
åœ¨ç¬”è®°ç›®å½•ä¸‹åˆ›å»ºä»»æ„ md æ–‡æ¡£ï¼Œåœ¨æ–‡æ¡£å¤´éƒ¨æ·»åŠ  frontmatterï¼Œä¾‹å¦‚ï¼š

```javascript
---
title: Cæ¦‚è¿°
createTime: 2023/04/02 18:28:57
permalink: /c/c-overview/
---
```

> å¦‚æœæ­¤æ—¶å·²ç»è¿è¡Œèµ·äº† vuepressï¼Œé‚£ä¹ˆ frontmatter ä¼šè‡ªåŠ¨ç”Ÿæˆã€‚
>

è¿™é‡Œçš„ permalink å°¤å…¶éœ€è¦æ³¨æ„ï¼Œä¸€å®šå¾—å¸¦ç€ç¬”è®°çš„ URL å‰ç¼€ï¼Œå¦åˆ™è¿™ç¯‡æ–‡æ¡£å°†ä¸ä¼šåœ¨ç¬”è®°çš„ä¾§è¾¹æ é‡Œæ˜¾ç¤ºã€‚

#### ç¬”è®°ç¼–å·
éç¬”è®°ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼Œéƒ½è¢«è®¤ä¸ºæ˜¯åšå®¢ï¼Œæ˜¯å•ç‹¬çš„ã€ä¸€ç¯‡ç¯‡çš„ç±»ä¼¼åŠ¨æ€ï¼ŒæŒ‰ç…§æ—¶é—´æ’åºï¼Œæ²¡æœ‰ä¾§è¾¹æ ï¼Œç»Ÿä¸€ URL å‰ç¼€ä¸º `/article/`ã€‚

è€Œç¬”è®°ç›®å½•ä¸‹çš„æ–‡æ¡£ï¼Œæ¯ä¸ªç¬”è®°çš„å­ç›®å½•éƒ½è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªç³»åˆ—ï¼ŒæŒ‰ç…§æ–‡ç« ç¼–å·æ’åºï¼Œæœ‰ä¾§è¾¹æ ï¼Œç»Ÿä¸€ URL å‰ç¼€åœ¨ä¸Šè¿° defineNoteConfig ä¸­æŒ‡å®šã€‚

ç¬”è®°æ–‡ç« çš„ç¼–å·å³æ¯ç¯‡æ–‡ç« æ ‡é¢˜ä¸­`ç¼–å·.`çš„å‰ç¼€ï¼Œå¦‚ `1.C æ¦‚è¿°`ã€`2.åŸºç¡€è¯­æ³•`ç­‰ï¼Œå¦‚æœä¸æŒ‡å®šç¼–å·ï¼Œæ–‡ç« çš„é¡ºåºå°±æ˜¯å­—æ¯åºã€‚

#### ç¬”è®°ç›®å½•å­ç›®å½•
ç¬”è®°æ–‡æ¡£ä¸‹çš„å­ç›®å½•åœ¨é¡µé¢ä¸­ä¼šä»¥åˆ†å‰²çº¿çš„å½¢å¼å±•ç¤ºã€‚

#### æ•ˆæœå›¾è¯´æ˜
![](../../../.vuepress/public/images/1727020968936-419660ba-a7f6-4636-a499-fcbb3d8a8d65.png)

![](../../../.vuepress/public/images/1727020335133-cf5013c1-8987-4524-86c7-fcac412d3fe5.png)

### è‡ªå®šä¹‰ frontmatter
ä¸Šä¸€èŠ‚è¯´äº†æ–‡æ¡£çš„ frontmatter å±æ€§ï¼Œfrontmatter å¯ä»¥å¸®åŠ©ç”Ÿæˆä¸€äº›æ–‡ç« ä¿¡æ¯ï¼Œå¦‚æ–‡ç« åç§°ã€æ–‡ç« åˆ›å»ºæ—¶é—´ã€æ–‡ç« é“¾æ¥ï¼Œè¿™äº›ä¿¡æ¯ä¼šåœ¨é¡µé¢ä¸­è¿›è¡Œå±•ç¤ºã€‚

```javascript
---
title: Cæ¦‚è¿°
createTime: 2023/04/02 18:28:57
permalink: /c/c-overview/
---
```

å…¶ä¸­æ–‡ç« é“¾æ¥è¿™ä¸ªä¿¡æ¯ä¸ªäººè®¤ä¸ºéå¸¸é‡è¦ï¼Œå³æ¯ç¯‡æ–‡ç« åœ¨åœ°å€æ é‡Œçš„ URLï¼Œå…³ç³»ç€æœç´¢å¼•æ“çš„ SEOï¼Œæœ€å¥½ä¸è¦ç»å¸¸å˜åŠ¨ï¼Œä¸Šè¿°æ–‡ç« çš„ URLï¼š

```javascript
https://blog.ifback.com/c/c-overview/
```

é»˜è®¤æƒ…å†µä¸‹ vuepress-theme-plume ä¼šè‡ªåŠ¨ç”Ÿæˆ frontmatterï¼Œä½†å…¶ç”Ÿæˆçš„ frontmatter æœ‰ä¸¤ä¸ªé—®é¢˜ï¼š

1. æ–‡ç« åˆ›å»ºæ—¶é—´æ˜¯æ–‡æ¡£åœ¨æœ¬åœ°åˆ›å»ºçš„æ—¶é—´ï¼Œä¸æ˜¯è¯­é›€ä¸Šåˆ›å»ºçš„æ—¶é—´ï¼Œæ˜¾ç„¶ä¸æˆ‘ä»¬åŒæ­¥è¯­é›€æ–‡æ¡£çš„æƒ³æ³•ä¸ä¸€è‡´ã€‚
2. æ–‡ç« çš„é“¾æ¥æ˜¯éšæœºç”Ÿæˆçš„ 8 ä½ uidï¼Œåœ¨æ¯æ¬¡æ–‡æ¡£æ›´æ–°æ—¶éƒ½ä¼šå‘ç”Ÿå˜åŒ–ã€‚

é‰´äºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±æ§åˆ¶ç”Ÿæˆæ¯ç¯‡æ–‡ç« çš„ frontmatterï¼Œå¥½åœ¨ elog æä¾›äº†æ–‡æ¡£å¤„ç†æ¥å£ï¼Œé‡Œé¢åŒ…æ‹¬äº†æ–‡æ¡£çš„åŸºæœ¬ä¿¡æ¯ï¼Œå¯ä»¥æ»¡è¶³è¦æ±‚ã€‚

> å¦‚æœä½ ä¸ä»‹æ„è¿™ä¸€ç‚¹ï¼Œé‚£ä¹ˆå°±ä¸å¿…è‡ªå®šä¹‰ frontmatter äº†ã€‚
>

#### å…³é—­ vuepress-theme-plume çš„è‡ªåŠ¨ç”Ÿæˆ frontmatter
```javascript
export default defineUserConfig({
  theme: plumeTheme({   
    autoFrontmatter: false,
  })
  // å…¶ä»–é…ç½®
})
```

#### å¼€å¯ elog çš„æ–‡æ¡£å¤„ç†
åˆ›å»ºè‡ªå®šä¹‰æ–‡æ¡£æ’ä»¶ elog-front-matter.cjs æ–‡ä»¶ï¼š

> è¯¥æ–‡ä»¶ä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹ã€‚
>

```javascript
const { matterMarkdownAdapter } = require('@elog/cli')

// ç¬”è®°ç›®å½•å’Œ URL å‰ç¼€
const docNotes = [
  { dir: 'Cç¼–ç¨‹', path: '/c/' },
  { dir: 'Javaç¼–ç¨‹', path: '/java/' },
]

/**
 * è‡ªå®šä¹‰æ–‡æ¡£æ’ä»¶
 * @param {DocDetail} doc docçš„ç±»å‹å®šä¹‰ä¸º DocDetail
 * @param {ImageClient} imageClient å›¾åºŠä¸‹è½½å™¨ï¼Œå¯ç”¨äºå›¾ç‰‡ä¸Šä¼ 
 * @return {Promise<DocDetail>} è¿”å›å¤„ç†åçš„æ–‡æ¡£å¯¹è±¡
 */
const format = async (doc, imageClient) => {
  let date = doc.properties.date; // è·å–è¯­é›€æ–‡æ¡£åˆ›å»ºæ—¶é—´
  let directories = doc.docPath.split('\\'); // æœ¬åœ°æ–‡æ¡£çš„ç›®å½•
  let docNotePermalink = '/article/'; // é»˜è®¤æ–‡æ¡£æ˜¯åšå®¢æ–‡æ¡£

  if (directories[1] === 'ç¬”è®°') { // å¦‚æœæ–‡æ¡£å¤„åœ¨ç¬”è®°ç›®å½•ä¸‹
    docNotes.forEach(item => {
      if (item.dir === directories[2]) {
        docNotePermalink = item.path; // è·å–æ–‡æ¡£ URLå‰ç¼€
      }
    });
  }

  doc.properties.date = date.replace(/-/g, '/'); // æ ¼å¼åŒ–æ—¶é—´
  // å»æ‰æ–‡æ¡£åç§°çš„ç¼–å·åŠ .çš„å‰ç¼€
  // æ·»åŠ æ—¶é—´
  // æ·»åŠ æ–‡æ¡£é“¾æ¥
  doc.body = 
    '---\n' + 
    'title: ' + doc.properties.title.replace(/^\d+\./, '') + '\n' +
    'createTime: ' + doc.properties.date + '\n' +
    'permalink: ' + docNotePermalink + doc.properties.urlname + '\/'  + '\n' +
    '---\n' + 
    doc.body;

  return doc;
};

module.exports = {
  format,
};
```

`doc.properties.urlname` æ˜¯è¯­é›€æ¯ç¯‡æ–‡æ¡£çš„ urlï¼Œç±»ä¼¼çŸ¥è¯†åº“ã€‚é»˜è®¤æƒ…å†µä¸‹æ˜¯éšæœºå­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥è‡ªå·±æŒ‡å®šï¼Œå¯ä»¥åœ¨æ–‡æ¡£è®¾ç½®çš„é«˜çº§é€‰é¡¹é‡Œçœ‹åˆ°/è®¾ç½®ã€‚

> ä¸ªäººå»ºè®®æ¯ç¯‡æ–‡æ¡£åœ¨åˆ›å»ºçš„æ—¶å€™å¯ä»¥é¡ºä¾¿è®¾ç½®ä¸€ä¸‹è¿™ä¸ªæ–‡æ¡£çš„åç§°ï¼Œæ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¹ æƒ¯ï¼Œä¹Ÿæœ‰åˆ©äº SEOã€‚
>

![](../../../.vuepress/public/images/1727021706218-68235b85-b5fb-43b2-9e44-b06755448f41.png)

åœ¨è¾“å‡ºé…ç½®é‡Œï¼ŒæŒ‡å®šè‡ªå®šä¹‰æ–‡æ¡£æ’ä»¶çš„æ–‡ä»¶ï¼š

```javascript
module.exports = {
  deploy: {
    platform: 'local',
    local: {
      formatExt: './elog-front-matter.cjs',
    },
  }
  // å…¶ä»–é…ç½®
}
```

åé¢åœ¨æ‰§è¡Œæ–‡æ¡£åŒæ­¥çš„æ—¶å€™ï¼Œæ–‡æ¡£å°±ä¼šæŒ‰ç…§ä¸Šé¢æˆ‘ä»¬è‡ªå®šä¹‰çš„æ ¼å¼æ·»åŠ  frontmatter äº†ã€‚

